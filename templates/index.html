<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Product Catalog</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 20px;
                background: #f8f8f8;
            }
            h1 {
                text-align: center;
                margin-bottom: 18px;
            }
            .controls {
                display: flex;
                gap: 10px;
                justify-content: center;
                margin-bottom: 20px;
                flex-wrap: wrap;
            }
            .controls input[type="text"]{
                padding: 8px 10px;
                width: 260px;
                border: 1px solid #ccc;
                border-radius: 6px;
            }
            .controls select {
                padding: 8px 10px;
                border: 1px solid #ccc;
                border-radius: 6px;
            }
            .controls button, .controls a {
                padding: 8px 12px;
                border: none;
                border-radius: 6px;
                text-decoration: none;
                cursor: pointer;
            }
            .controls button {
                background-color: #1976d2;
                color: white;
            }
            .controls a {
                background-color: #eee;
                color: #333;
                display: inline-block;
                line-height: 1;
            }
            .grid {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 20px;
                padding: 20px;
            }
            .card {
                background-color: #fff;
                border-radius: 10px;
                overflow: hidden;
                transition: transform 0.2s ease;
                text-align: center;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            }
            .card:hover {
                transform: scale(1.02);
            }
            .card img {
                width: 100%;
                height: 250px;
                object-fit: cover;
                display: block;
            }
            .card h3 {
                margin: 10px 0 5px;
                font-size: 1.1rem;
            }
            .card p {
                color: #555;
                margin-bottom: 10px;
            }
            .no-results {
                text-align: center;
                color: #666;
                margin-top: 30px;
            }
        </style>
    </head>
    <body>
        <h1>üõç Product Catalog</h1>
        <div class="controls">
            <form method="get" action="/" style="display:flex; gap:10px; align-items:center;">
                <input type="text" name="q" placeholder="Search products..." value="{{ q|default('') }}">
                <select name="category">
                    <option value="all" {% if selected_category == 'all' %}selected{% endif %}>All Categories</option>
                    {% for cat in categories %}
                        <option value="{{ cat }}" {% if cat == selected_category %}selected{% endif %}>{{ cat }}</option>
                    {% endfor %}
                </select>
                <button type="submit">Search</button>
                <a href="{{ url_for('home') }}" style="margin-left: 6px;">Clear</a>
            </form>
        </div>
        {% if products %}
        <div class="grid">
            {% for product in products %}
            <div class="card">
                <img src="{{ url_for('static', filename='images/' + product.image_url.split('/')[-1]) }}" alt="{{ product.name }}">
                <h3>{{ product.name }}</h3>
                <p>{{ product.category }}</p>
            </div>
            {% endfor %}
        </div>
        {% else %}
            <div class = "no-results">No products found. Try adjusting your search or category.</div>
        {% endif %}
    </body>
</html>